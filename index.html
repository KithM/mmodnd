<!DOCTYPE html>
<html>
  <head>
    <title>Icycold's TTRPG Item Generator</title>
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
    <script src="math.js"></script>
    <script src="arrays.js"></script>
    <script src="items.js"></script>
    <script>
      function generate() {
        let item = generateItem();
        let resultString = '';

        if (item) {
            // Add item quality
            let qualityColor;
            switch(item.itemQuality.name) {
                case 'Common':
                    qualityColor = 'black';
                    break;
                case 'Uncommon':
                    qualityColor = 'green';
                    break;
                case 'Rare':
                    qualityColor = 'blue';
                    break;
                case 'Epic':
                    qualityColor = 'purple';
                    break;
                case 'Legendary':
                    qualityColor = 'orange';
                    break;
                default:
                    qualityColor = 'black';
                    break;
            }
            
            resultString += `<div style="border: 2px solid ${qualityColor}; padding: 10px; margin: 10px; width: 300px;">`;

            // Add item quality name
            resultString += `<span style="color: ${qualityColor}; font-weight: bold;">${item.itemQuality.name}</span><br>`;

            // Add item name
            resultString += `<span style="font-size: 1.2em; font-weight: bold;">${item.name || 'Unnamed Item'}</span><br>`;

            // Add level
            resultString += `Level ${item.level}<br>`;
            
            // If the item is a weapon, show damage range
            if (item.minDamage && item.maxDamage) {
                resultString += `${item.minDamage}-${item.maxDamage} Damage<br>`;
            }

            // Add primary attribute if available
            if (item.primaryAttribute && item.primaryValue) {
                resultString += `+${item.primaryValue} ${item.primaryAttribute}<br>`;
            }

            // Add secondary attributes
            for (let [attribute, value] of Object.entries(item.secondaryAttributes)) {
                resultString += `+${value} ${attribute}<br>`;
            }
            
            // Add item slot
            resultString += `<span>${item.slot}</span><br>`;

            // Add item durability
            resultString += `<span><b>Durability:</b> ${item.durability} / ${item.durability}</span><br>`;

            resultString += `</div>`;
            
            // Assign the formatted string to the HTML element
            document.getElementById("result").innerHTML = resultString;
        }
    }
    </script>
  </head>
  <body>
    <h1>Advanced Item Generator</h1>
    <form>
      Enter Item Level: <input type="text" id="itemLevel">
      <input type="button" value="Generate Item" onclick="generate()">
    </form>
    <div id="result"></div>
  </body>
</html>
